# Fama-French-fund analyzer
#### Video Demo:  <https://youtu.be/QZ-IWXg7BPk>
#### Description:

##### Motivation for this project
Already during the course I was trying to come up with ideas for the final project. I researched what other people did to get an inspiration but quickly realised that I needed to find a project I can be passionate about. One of my interest is finance: financial markets, financial research, investing, personal finance and much more. So there is a lot of ground to cover for possible projects - things I had excel sheets for up to now. Copying data from financial websites into the excel sheet and performing calculations on them can be quite time consuming. So writing a simple software that can help me with that seemed like a great idea.

As a trained scientist I always gravitate towards the data and facts to guide my decisions. Investing is no exception of course - put your money where your mind is! While science mostly solved investing (just buy the market with a low-cost well diversified index fund), there is more: 'factor investing'. In short, the evidence behind factor investing states that there exist (risk) factors that explain portfolio returns beyond the mere market risk. Over the time many factors have been published populating a lovely factor zoo, but only few factors hold up. According to Larry Swedroe they have to be pervasive, persistent, robust, investable and intuitive. The main model that can hold up to these is criteria is the 5-Factor-Model by Kenneth French and Nobel laureate Eugene Fama: the market risk (Mkt),  size (SMB), value (HML), profitability (RMW) and investment (CMA) explain most of the investment outcomes - and can be exploited to achieve better returns. That is what I do. However, I add one more factor to this model, the momentum factor - that one is somewhat controversial as it is mainly driven by investor behavior: Stocks that go up continue to go up (for some time) and stocks that go down continue to do so (for some time) as investors might overreact to good and bad news - or underreact for that matter (Well, there are more explanations). As people will be people I believe momentum will never go away and I also believe it is tradable despite the high turnover. So I add it to my assumptions.

There are many funds out there that target these factors. One way to evaluate how well they do is to perform linear regression because the factor model is a simple linear modell. For every factor the [Kenneth French data library](https://mba.tuck.dartmouth.edu/pages/faculty/ken.french/data_library.html) publishes the returns of these factors. You can then regress the fund return on these factors to evaluate their contribution to the fund return. What the factors can't explain is called alpha (Its the intercept of the regression analysis). The regression tells you if and how well the fund targets the factors. For an US investor its simple. There are good tools available online that do exactly that for you. For an European investor like me, it is less simple. There are some community-based approaches online that are a good start but don't entirely deliver what I want. Writing my own programm gives me the opportunity to create all the information I need. I regard my project as a base for future further developments that I can add in time to expand the functionality. As this project is very much data driven, this was also an opportunity to delve into datascience beyond programming.

##### What does the programm do
On the surface my programm works very simple. It's operated in the command-line interface, like all our assignments during the course. It prompts the user for the yahoo finance ticker of the fund they want to assess. In the next steps they have to enter the currency denomination of the fund, the region of the world it invests in and a time window for rolling regressions that show how the contributions of the factors change over time. Instead of the ticker there is also the possibility to provide a file path in the command-line to upload excel files with return data of indices or funds as most index returns are not readily available. The ouput is an pdf file that depicts the fund return over maximum the last ten years, calculates the compound annual growth rate (CAGR) over that time horizon, displays the regression results over the whole time frame of the available data and plots the results of the rolling regression to see how the contribution of these factors varied over time.

What happens under the hood: In a seperate file I programmed a Fundanalyzer class that upon instantiation downloads the name and return data of the fund that was specified by the ticker using the yfinance library or opens to file to get index return data and name from there. The data is stored in a pandas dataframe. The return data of the file is assumed to be monthly, the ticker data is converted to end of the month data. If the funds denomination is in EUR, the Funanalyzer downloads the USD-EUR exchange rate from yahoo finance and converts the NAV (net asset value) of the fund into USD. Corresponding to the fund's investment region the appropriate montly data set for the five factor model plus momentum is downloaded from the Kenneth French data library using the pandas datareader function. The data is again stored in a pandas dataframe. Originally I also wanted to implement several class functions to perform the different regressions. The fundanalzyer class would have felt more complete. However the project requirements asked for at least three independent functions in the main project file, so I defined the functions independently in the project file.

One function plots the fund return of the last ten years (maximum) normalized to the start value using the matplotlib library. It employs another function to calculate the CAGR over that time frame and displays the calculated value directly in the plot. Another function processes the data for the regression, meaning that it joins the fund data and the Fama French data and subsequently assigns the dependent variable y (the fund return minus the risk free return of the U.S. one month T-bill rate) and the independent variables X (the factor returns). X and y are fed into the linear regression class and the rolling regression class of the statsmodels module. The simple regression results are usually displayed in the terminal. To display the summary in the pdf file, the programm takes a short cut and adds the summary text to an empty matplotlib figure. The rolling regression results are again visualized with the matplotlib library. To get a nice readout, the programm puts these different plots in a pdf file using the fpdf2 library and names the file after the name of the fund. Matplotlib plots however cannot directly be inserted into a pdf so I had to temporarily store them as png file using BytesIO from the io module.

